## 유전 알고리즘
  - 유전자 알고리즘
    - 다윈의 진화론으로부터 창안된 해 탐색 알고리즘 
    - '적자생존'의 개념을 최적화 문제를 해결하는데 적용
  - GA 사이클
    - ![image](https://user-images.githubusercontent.com/61530368/172890504-a56e0714-71dc-4c2d-9e1a-122c3715a8cc.png)
    - 후보해 집합 n개 선택
    - 적합도평가에서 적합도가 높으면 뽑힐 확률이 올라감
    - 후보해 선택에서 m개를 선택(m < n)
    - 교차/돌연변이 연산으로 n개가 다시 만들어짐
    - 최소값 >= 이전 최솟값 중지 (k만큼 기다리게 해서 이전 최솟값 보다 현재 최솟값이 커도 진행하기도함)
  - 슈도코드
    ``` 
      1. 초기후보해 집합 G0을 생성
      2. G0의 각 후보해를 평가
      3. t = 0
      4. repeat
      5.  Gt로부터 Gt+1을 생성 (후보해 선택 및 교치/돌연변이 연산으로 새로운 후보해 생성)
      6.  Gt+1의 각 후보해를 평가 (evaluation)
      7.  t = t + 1
      8. until 종료 조건이 만족될 때까지
      9. return Gt의 후보해 중에서 가장 우수한 해 
    ```
    - 여러 개의 해를 임의로 생성하여 이들을 초기 세대(generation) G0로 놓고
    - repeat-루프에서 현재 세대의 해로부터 다음 세대의 해를 생성해가며
    - 루프가 끝났을 때의 마지막 세대에서 가장 우수한 해를 반환
    - 이 해들은 repeat-루프의 반복적인 수행을 통해서 최적해 또는 최적해에 근접한 해가 될 수 있으므로 후보해라고 부른다
  - 후보해
    - TSP: 5개의 도시(A, B, C, D, E), 시작도시 = A
    - TSP는 시작 도시에서 출발하여 모든 다른 도시를 1번씩만 방문하고 시작 도시로 돌아와야 하므로, ABCDEA, ACDEBA 등이 후보해 
    - ![image](https://user-images.githubusercontent.com/61530368/172892236-1b092096-ba03-4571-895d-809e7198fae0.png)
  - 후보해의 수
    - 시작 도시를 제외한 4개의 도시를 일렬로 나열하는 방법의 수:(5-1)! =4! =24
    - n개의 도시의 후보해 수 = (n-1)!
  - 후보해의 평가
    - ABCDEA의 값 = 5 + 2 + 1+ 3 + 9 = 20
    - ![image](https://user-images.githubusercontent.com/61530368/172892661-3ce0f696-ae2a-45bc-af58-326188022a6f.png)
  - 적합도
    - 후보해의 값 = 후보해의 적합도(Fitness value)
    - 후보해 중에서 최적해의 값에 근접한 적합도를 가진 후보해를 '우수한' 해라고 부른다
  - GA 연산
    - 선택(selection) 연산
      - 현재 세대의 후보해 중에서 우수한 후보해를 선택하는 연산 
      - 현재 세대에 n개의 후보해가 있으면
      - 이렇게 선택된 후보해의 수는 m개로 유지(m < n)
      - 룰렛휠 방법
        - 각 후보해의 적합도에 비례하여 원반의 면적을 할당, 원반을 회전시키면서 원반이 멈추었을 때 핀이 가리키는 후보해를 선택 
        - 적자생존 개념을 모방한 것 면적이 넓은 후보해가 선택될 확률이 높다
        - ![image](https://user-images.githubusercontent.com/61530368/172893579-02d2221d-e092-46df-b1e8-39a38fd87cc1.png)
      - 토너먼트 선택
        - 1. 후보해 집합에서 k개의 후보해를 랜덤하게 선택
        - 2. 선택된 k개 중에서 가장 적합도가 우수한 해를 1개 선택
        - 3. 1~2의 과정을 m개의 우수한 해를 선택할 때까지 반복 
        - 이진 토너먼트 선택 k = 2
    - 교차(crossover) 연산
      - 1-점(point) 교차 연산
        - 랜덤하게 교차할 점을 선태한 후, 두 개의 후보해를 교차점을 기준으로 뒷부분을 서로 교환
        - ![image](https://user-images.githubusercontent.com/61530368/172894139-93ec13ea-9dd8-4e62-b636-1509ffeead93.png)
      - 교차 연산의 목적
        - 선택 연산을 통해서 얻은 우수한 후보해보다 우수한 후보해를 생성하기 위해
      - 교차율(crossover Rate)
        - 문제에 따라 교차 연산을 수행할 후보해의 수를 조절하는데, 이를 교차율이라고 한다
        - 일반적으로 교차율은 0.2 ~ 1.0 번위에서 정한다  

    - 돌연변이 연산 
      - 교차 연산 수행 후에 돌연변이 연산 수행
      - 아주 작은 확률로 후보해의 일부분을 임의로 변형
      - 이 확률을 돌연변이율이라고 하며 일반적으로 (1/PopSize) ~ (1/Length)의 범위에서 사용
        - PopSize란 모집단 크기 (Population Size)로서 한 세대의 후보해의 수 (m)
        - Length란 후보해를 이진 표현으로 했을 경우의 bit 수
      - 돌연변이가 수행된 후에 후보해의 적합도가 오히려 나빠질 수도 있음 
      - ![image](https://user-images.githubusercontent.com/61530368/172894679-56bdc790-c6aa-4c47-b996-ac354ffe8bdf.png)
      - 돌연변이 연산의 목적
        - 다음 세대에 돌연변이가 이루어진 후보해와 다른 후보해를 교차 연산함으로써 이후 세대에서 매우 우수한 후보해를 생성하기 위해
      - 돌연변이 연산 역할
        - 지역최적화에서 글로벌 최적화로 가기위함(나빠질 수도 있음)
        - ![image](https://user-images.githubusercontent.com/61530368/172894963-118e0156-ade1-44e1-8671-6a891652b0d3.png)
  - 종료 조건
    - 유전자 알고리즘이 항상 최적해를 찾는다는 보장이 없기 때문에 종료 조건이 일정하지 않다
      - 일반적으로 알고리즘을 수행시키면서 더 이상 우수한 해가 출현하지 않으면 알고리즘을 종료 
  - GeneticAlgorithm 수행과정
    - 다음의 2차 함수에 대해 유전 알고리즘으로 0 <= x <= 31 구간에서 최대값을 찾아보자 
      - f(X) = -x^2 + 38x + 80
    - 초기 세대를 구성하는 후보해들을 결정
      - 먼저 한 세대의 후보해 수를 4로 정하고, 0~31에서 랜덤하게 4개의 후보해인 1, 29, 3, 10을 선택하였다고 가정
    - 각 후보해의 적합도
      - f(1) = -(1)^2 + 38(1) + 80 = 117
      - f(29) = 341
      - f(3) = 185
      - f(10) = 360  
      - ![image](https://user-images.githubusercontent.com/61530368/173115383-5fd7e0c2-853e-4b09-b03f-31bccf8f08a8.png)
      - 초기 세대의 평균 적합도는 250.75
      - 초기 세대의 평균 적합도와 다음 세대의 평균 적합도를 비교하여 좋아졌는지 나빠졌는지 판단 가능
    - 선택 연산
      - 룰렛 휠 선택 방법으로 후보해 4는 2번 선택 ,후보해 2와 3은 각각 1번 선택, 후보해 1은 선택이 안되었다고 가정
    - 교차 연산
      - 후보해 4가 2개이므로, 후보해 2와 4를 짝짓고, 후보해 3과 4를 짝지어 아래와 아래와 같이 교차 연산을 수행
      - 단, 1점-교차 연산을 위해 아래와 같이 임의의 교차점이 선택되었다고 가정 
    - 돌연변이 연산
      - 교차 연산 후에 후보해 1의 왼쪽에서 두 번째 bit가 돌연변이가 되어 '1'에서 '0'으로 바뀌었다고 가정
      - 다른 후보해는 교차 연산 후와 동일
    - ![image](https://user-images.githubusercontent.com/61530368/173116230-e0c89f61-c5fc-4da8-bb78-8083c0f5765b.png)

    - 두 번째 세대의 후보해에 대한 적합도
      - 평균 적합도가 343.5로 첫 세대의 250.75보다 많이 향상됨
      - ![image](https://user-images.githubusercontent.com/61530368/173116431-63d4078d-aa3a-46e0-9e2e-8a8170d325df.png)
    - 알고리즘 종료
      - 충분한 세대를 거쳐 repeat-루프를 더 수행하여 후보해의 적합도가 변하지 않으면 알고리즘을 종료
      - 후보해 중에서 가장 적합도가 높은 후보해를 리턴
  - TSP를 위한 GeneticAlgorithm
    - 여행자 문제를 해결할 때 GeneticAlgorithm을 적용하기 위해 사용되는 2가지의 교차 연산
      - 2점 교차 연산
      - 사이클 교차 연산 (TSP는 경로자체가 다 나와야하고 한번씩만 나와야하는데 이것때문에 사이클 교차연산을 적용)
    - 여행자 문제의 후보해
      - 시작 도시부터 각 도시를 중복없이 나열하여 만들어진다
    - 2점 교차 연산
      - 임의의 2점을 정한 후, 가운데 부분을 서로 교환
      - 이후 중복되는 도시(점선 박스 내의 도시)를 현재 후보해에 없는 도시로 차례로 바꾼다
      - ![image](https://user-images.githubusercontent.com/61530368/173117607-94632728-c4db-48a2-9cb0-cba3667d853b.png)
      - 후보해 1에 대해 가운데 부분을 제외한 부분에 있는 H, B, A를 각각 C, D, E로 바꾸고
      - 후보해 2에 대해 가운데 부분을 제외한 부분에 있는 C, D, E를 각각 H, B, A로 바꾼다
    - 사이클 교차 연산
      - 후보해 1에서 임의의 도시 C를 선택한 후, C와 같은 위치에 있는 후보해 2의 도시 D와 바꾼다 (1)
      - 바꾼 후에는 후보해 1에는 C가 없고, D가 2개 존재
      - 이를 해결하기 위해 후보해 1에 원래부터 있었던 D를 후보해 2에 D와 같은 위치에 있는 G와 바꾼다 (2)
      - 이렇게 반복하여 C가 후보해 2로부터 후보해 1로 바뀌게 되면 교차 연산을 마친다
      - ![image](https://user-images.githubusercontent.com/61530368/173118439-d2fb674b-b5cc-42ef-a320-f1ac272e6dfb.png)
  - 다양한 실험 필요
    - 유전자 알고리즘은 대부분의 경우 실제로 적지 않은 실험이 필요
    - 주어진 문제에 대해서 모집단의 크기, 교차율, 돌연변이율 등과 같은 파라미터가 다양한 실험을 통해서 조절되어야
    - repeat-루프의 종료 조건도 실험을 통해서 결정할 수밖에 없다
    - 또한 다양한 선택 연산과 교차 연산 중에서 어떤 연산이 주어진 문제에 적절한지도 많은 실험을 통해서 결정해야
  - 유전자 알고리즘 특징
    - 문제의 최적해를 알 수 없고, 기존의 어느 알고리즘으로도 해결하기 어려운 경우에, 최적해에 가까운 해를 찾는데 매우 적절한 알고리즘
    - 유전자 알고리즘이 최적해를 반드시 찾는다는 보장은 없으나 대부분의 경우 매우 우수한 해를 찾는다
    - 반면, 시간이 매우 오래 걸린다

## 모의 담금질 (Simulated Annealing)
  - 모의 담금질 기법
    - 모의 담금질기법은 높은 온도에서 액체 상태인 물질이 온도가 점차 낮아지면서 결정체로 변하는 과정을 모방한 해 탐색 알고리즘 
