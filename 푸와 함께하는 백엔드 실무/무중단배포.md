# 무중단 배포
  - 배포를 중단 없이 한다는 의미
  ![image](https://user-images.githubusercontent.com/61530368/166641365-165d4e89-0bcf-4498-9cbf-f5b45e191830.png)
  - 위 그림에서 V2로 바꿀때 V1의 서버를 내리고 V2를 해야함 (중단 배포)
  ![image](https://user-images.githubusercontent.com/61530368/166641540-a82866b4-1e22-43f9-8ebd-17fb90648384.png)
  - 위 그림에 있는 리버스 프록시로 해결 (프록시는 대리자 역할)
  - 기존의 프록시는 클라이언트를 숨기는 역할을 함 그럼 리버스 프록시는 서버를 숨기는 것임 
  - 리버스 프록시를 통해 로드 밸런싱을 통해 서버의 부하를 줄임 
  ![image](https://user-images.githubusercontent.com/61530368/166641955-12bde983-7efd-4cac-8191-825fae341d24.png)
  - Nginx가 이러한 역할을 해줌 
  - 여러가지 배포 방식 
    - 롤링 배포
      - 일반적인 배포를 의미
      - 단순하게 서버를 구성하여 배포하는 전략 
      - 구 버전에서 신 버전으로 트래픽을 점진적으로 전환하는 배포
      - 관리가 편하지만, 배포 중 한쪽 인스턴스의 수가 감소되므로 서버 처리 용량을 고려해야 함 
    ![image](https://user-images.githubusercontent.com/61530368/166652201-2c825b82-51ab-43a7-b6d1-1e8979c39c62.png)

    - 블루 그린 배포
      - 구 버전을 블루, 신 버전을 그린 이라고 해서 붙여진 이름
      - 신 버전을 배포하고 일제히 전환하여 모든 연결을 신 버전을 바라보게 하는 전략
      - 구 버전, 신 버전 서버를 동시에 나란히 구성하여 배포 시점에 트래픽이 일제히 전환
      - 빠른 롤백이 가능, 운영환경에 영향을 주지 않고 실제 서비스 환경을 신 버전 테스트가 가능
      - 단, 이러한 구성은 시스템 자원이 두배로 필요하여 비용이 더 많이 발생
    ![image](https://user-images.githubusercontent.com/61530368/166652371-1b990376-1179-4c77-8505-70a3e327022b.png)

    - 카나리 배포  
      - Canary의 사전적 의미는 카나리아라는 새(카나리아는 유독가스에 굉장히 민감한 동물로 석탄 광산에 유독가스 누출의 위험을 알리는 용도로 사용)
      - 카나리 배포는 위험을 빠르게 감지할 수 있는 배포 전략
      - 지정한 서버 또는 특정한 user에게만 배포했다가 정상적이면 전체를 배포
      - 서버의 트래픽을 일부를 신 버전으로 분산하여 오류 여부를 확인할 수 있음
      - 이런 전략은 A/B 테스트가 가능하며, 성능 모니터링에 유용
      - 트래픽을 분산시킬 때는 라우팅을 랜덤 하게 할 수 있고, 사용자로 분류할 수 있음
    ![image](https://user-images.githubusercontent.com/61530368/166652579-2c1f63b5-2d2b-41a2-83b4-e6aba6106a6d.png)
  - 많은 트래픽은 Nginx만으로 충분하지 않음
    - Nginx도 결국 서버 자원을 사용해서 동작, 트래픽을 무한정 받아낼 수 없음
  - L4 로드밸런서 vs L7 로드밸런서 참고 https://d2.naver.com/helloworld/284659
